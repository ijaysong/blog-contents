# 테스트
스프링이 개발자에게 제공하는 가장 중요한 가치로 `객체지향`과 `테스트`라고 말할 수 있다.

## USERDAOTEST 다시보기
### 작은 단위의 테스트
테스트 하고자 하는 대상이 명확하다면, 그 대상에만 집중해서 테스트하는 것이 바람직하다.
한꺼번에 너무 많은 것을 몰아서 테스트하면 테스트 수행과정도 복잡해지고, 오류가 발생했을 때 정확한 원인을 찾기가 힘들어진다.
`관심사의 분리`라는 원리가 여기에도 적용된다.
테스트의 관심이 다르다면 테스트할 대상을 분리하고 집중해서 접근해야 한다.
이렇게 작은 단위의 코드에 대해 테스트를 수행한 것을 `단위 테스트`라고 한다.

단위테스트의 크기와 범위가 어느 정도인지 딱 정해진 건 아니지만, 크게는 사용자 관리 기능을 모두 통틀어서 하나의 단위로 볼 수도 있고, 작게보자면 메소드 하나만 가지고 하나의 단위라고 생각할 수도 있다. 충분히 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위의 단위라고 보면 된다.

때로는 하나의 단위 뿐만 아니라, 여러 단위를 하나로 묶어서 테스트할 필요가 있다.
초기 등록이 성공하면 로그인 되고, 각종 기능을 모두 사용한 다음에 로그아웃 되는 등의..
각 단위 기능은 잘 동작하는데 묶어놓으면 안되는 경우가 종종 발생하기 때문에 이런 길고 많은 단위가 참여하는 테스트도 필요하다.

### 자동수행 테스트 코드
테스트는 자동으로 수행되도록 하는 것이 중요하다.
현재는 main 메소드 안에 코드로서 테스트 값을 지정하고 있지만, 이러한 경우에는 매번 테스트 값을 바꾸어줘야 하는 등의 절차가 복잡하다.

테스트 코드는 테스트 용 클래스를 만들어 수행하는 것이 좋다.
애플리케이션을 구성하는 클래스 안에 굳이 테스트 코드가 포함될 필요가 없을 뿐더러, 테스트 기능을 별도로 분리하여 관리하는 것이 편리하기 때문이다.

자동으로 수행되는 테스트의 장점은 자주 수행할 수 있다는 점이다.
번거로운 작업이 없고, 테스트를 빠르게 실행할 수 있기 때문에 언제든 코드를 수정하고 나서 테스트를 해 볼 수 있다.

때로는 단 한줄의 코드를 건드렸는데 전체 기능에 영향을 주기도 한다.
운영 중인 애플리케이션의 코드를 간단히 수정하고자 할때에도 그럴 때 만들어둔 기능에 대한 테스트가 있다면, 수정 후 빠르게 전체 테스트를 수행해서 수정 때문에 다른 기능에 문제가 발생하지 않는지 확인할 수 있다.

### 지속적인 개선과 점진적인 개발을 위한 테스트
테스트가 없었다면 다양한 방법을 동원해서 코드를 수정하고 설계를 개선해나가는 과정이 쉽지 않았을 것이다.
만약 처음부터 스프링을 적용하고 XML로 설정을 만들고 모든 코드를 다 만들고 나서 테스트를 한다면 스프링을 잘못 사용한 것인지, 설정에 오류가 있는 것인지 등등 에러를 찾아내는데 아마도 적지 않게 고생을 하게 될 것이다.
하지만, 정상작동하는 코드에 대한 테스트를 해두었고, 여러 단계를 거쳐가며 계속 코드를 개선해나갈 수 있었다.
개발과 테스트의 과정을 거치며 코드를 변경해갔기 때문에 전체적으로 코드를 개선하는 작업에 속도가 붙고 더 쉬워졌다.

테스트 코드는 점진적인 개발이 가능하도록 한다.
UserDao에 새로운 기능을 추가하려 할 때도, 조금씩 기능을 추가해가며 테스트도 함께 추가하는 식으로 점진적 개발이 가능해진다.
테스트를 이용하면 새로운 기능도 기대한 대로 동작하는지 확인할 수 있을 뿐만 아니라, 기존에 만들어뒀던 기능들이 새로운 기능을 추가하느라 수정한 코드에 영향을 받지 않고 여전히 잘 동작하는 지도 확인할 수 있다.

## USERDAOTEST의 문제점
### 수동 확인 작업의 번거로움
UserDaoTest는 테스트를 수행하는 과정과 입력 데이터의 준비를 모두 자동으로 진행하도록 만들어졌다. 
하지만 DB에 정보를 등록하고, get()을 통해 가져왔을 때 가져온 값이 일치하는지를 테스트 코드는 확인해주지 않는다.
단지 콘솔에 값만 출력해줄 뿐이다.
테스트 수행은 코드에 의해 자동으로 진행되긴 하지만 테스트의 결과를 확인하는 일은 사람의 책임이므로 완전히 자동으로 테스트 되는 방법이라고 말할 수 없다.

단지 몇가지 필드 값에 대해 등록한 것과 조회하느 것이 일치하는지를 확인하는 일이 별거 아닐지도 모르지만, 검증해야 하는 양이 많고 복잡해지면 역시 불편함을 느낄 수 밖에 없다.
또한 작은 차이는 미처 발견하지 못하고 넘어가는 실수를 할 가능성도 있다.

### 실행 작업의 번거로움
아무리 간단히 실행 가능한 main() 메소드라고 하더라도 매번 그것을 실행하는 것은 제법 번거롭다.
만약 DAO가 수백 개가 되고 그에 대한 main()메소드도 그만큼 만들어진다면, 전체 기능을 테스트해보기 위해 main() 메소드를 수백 번 실행하는 수고가 필요하다.
결과를 눈으로 확인해서 기록하고, 이를 종합해서 전체 기능을 모두 테스트한 결과를 정리하려면 이것도 제법 큰 작업이 된다.

그래서 main() 메소드를 이용하는 방법보다 좀 더 편리하고 체계적으로 테스트를 실행하고 그 결과를 확인하는 방법이 필요하다.