# 제어의 역전

제어의 역전(Inversion of Control)이란, 프로그램의 제어 흐름 구조가 뒤바뀌는 것을 말한다.
IoC라는 약자로 많이 사용된다.

## 일반적인 프로그램의 흐름
일반적으로 프로그램의 흐름은 main()메소드와 같이 프로그램이 시작되는 지점에서 다음에 사용할 오브젝트를 결정하고, 결정한 오브젝트를 생성, 만들어진 오브젝트에 있는 메소드 호출을 하는 식의 작업이 반복된다.
이런 프로젝트 구조에서 각 오브젝트는 프로그램 흐름을 결정하거나 사용할 오브젝트를 구성하는 작업에 능동적으로 참여한다.
모든 오브젝트가 능동적으로 자신이 사용할 클래스를 결정하고, 언제 어떻게 그 오브젝트를 만들지를 스스로 관장한다.
모든 종류의 작업을 사용하는 쪽에서 제어하는 구조이다.

## 제어의 역전이 일어날 때의 흐름
제어의 역전이란 제어 흐름의 개념을 거꾸로 뒤집는 것이다.
제어의 역전에서는 오브젝트가 자신이 사용할 오브젝트를 스스로 선택하지 않는다.
당연히 생성하지도 않는다.
또 자신도 어떻게 만들어지고 어디서 사용되는지를 알 수 없다.
모든 제어 권한을 자신이 아닌 다른 대상에게 위임하기 때문이다.

ex) 추상 UserDao를 상속한 서브클래스는 getConnection()메소드를 구현한다.
메소드가 언제 어떻게 사용될지 자신은 모른다. 
단지 이렇게 만들어 놓으면 슈퍼클래스인 UserDao의 템플릿 메소드인 add(), get() 등에서 필요할 때 호출해서 사용되도록 한다는 제어의 역전 개념을 발견할 수 있다.

# 스프링의 IoC
 
 ## 오브젝트 팩토리를 이용한 스프링 Ioc
 스프링에서는 스프링 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트를 `빈`이라고 한다.
 빈의 생성과 관계설정 같은 제어를 담당하는 IoC 오브젝트를 `빈 팩토리`라고 한다.
 보통 빈 팩토리보다는 이를 좀 더 확장한 애플리케이션 컨텍스트를 주로 사용한다.
 애플리케이션 컨텍스트는 별도의 정보를 참고해서 빈(오브젝트)의 생성, 관계설정 등의 제어 작업을 총괄한다.

 ## 애플리케이션 컨텍스트의 동작방식
 * 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다.

클라이언트가 필요한 오브젝트를 가져오려면 어떤 팩토리 클래스를 사용해야 할지 알아야 하고, 필요할 때마다 팩토리 오브젝트를 생성해야 하는 번거로움이 있다.
애플리케이션 컨텍스트를 사용하면 오브젝트 팩토리가 아무리 많아져도 이를 알아야 하거나 직접 사용할 필요가 없다.
일관된 방식으로 원하는 오브젝트를 가져올 수 있다.

* 애플리케이션 컨텍스트는 종합 IoC 서비스를 제공해준다.

애플리케이션 컨텍스트의 역할은 단지 오브젝트 생성과 다른 오브젝트와의 관계설정 만이 전부가 아니다.
오브젝트가 만들어지는 방식, 시점과 전략, 자동생성, 오브젝트에 대한 후처리, 정보의 조합, 설정 방식의 다변화, 인터셉팅 등 오브젝트를 효과적으로 활용할 수 있는 다양한 기능을 제공한다.

* 애플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공한다.

애플리케이션 컨텍스트의 getBean() 메소드는 빈의 이름을 이용해 빈을 찾아준다.
타입만으로 빈을 검색하거나, 특별한 애노테이션이 설정되어 있는 빈을 찾을 수도 있다.
