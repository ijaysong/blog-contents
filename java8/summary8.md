# 자바 내용 정리 8

## `문자열의 특징`
#### `문자열은 불편 오브젝트`
String 클래스는 불변 클래스이다.  
작성한 인스턴스의 내용을 이후에 변경하는 것이 불가능하다.  
변경할 필요가 있을 때는 원래 인스턴스와 별도로 새로운 인스턴스를 작성할 때이다.  
예를 들어, 소문자를 대문자로 바꿀 때 toUpperCase()메소드를 사용하면 원래 문자열의 내용을 바꾸는 것이 아니라,모든 것을 대문자로 한 새로운 문자열을 작성해서 반환한다. 
-> 내용이 변경되지 않으므로 다른 메소드나 스레드에 안심하고 인스턴스를 보낼 수 있다.

~~~
String s1 = "Hello";
String s2 = s1.toUpperCase(); // toUpperCase() 메소드는 영어를 대문자로 변환한다.
~~~

#### `문자열 리터럴은 여러번 사용된다`
모든 문자열이 다 같은 것은 아니다.  
하나는 `리터럴(literal)`이고, 다른 하나는 `인스턴스`이다.  

~~~
String s1 = "Hello"; // 리터럴
String s2 = new String("Hello"); // 인스턴스
~~~

new로 작성한 문자열은 메모리의 힙 영역에 놓여진다.  
반면에, 대입연산자로 작성한 문자열은 `문자열 리터럴`이라 부르고, 힙 영역에 놓여진 후, 참조(메모리 상 위치)가 `문자열 리터럴풀`에 등록된다.  
다음에 동일한 문자열 리터럴이 작성될 때, 먼저 문자열 리터럴풀에서 참조를 찾아내 반환한다. 반복해서 사용하며, 신규 인스턴스를 작성하지 않아도 된다.    
다음의 s1과 s2는 동일한 참조를 가진다.

~~~
String s1 = "Hello";
String s2 = "Hello";
~~~

new를 사용해 작성하면 리터럴풀은 사용할 수 없다.  
new로 작성한 문자열 오브젝트는 매회 신규 작성된다.
다음의 s3와 s4는 각각 다른 참조를 가진다.

~~~
String s3 = new String("Hello");
String s4 = new String("Hello");
~~~

## `String 클래스`
new를 사용해, 인스턴스를 다른 문자열이나 byte 배열로부터 작성할 수 있다.  
byte 배열로부터 작성한 경우, 될수 있는 만큼 문자 셋을 지정해서 작성한다.  
join 메소드를 사용하면, 리스트나 배열의 요소를 결합해서 하나의 문자열로 할 수 있다.  
문자열 안에 특정 부분을 치환하던가, 특정 위치에서 분할 하는것이 가능하다.  
치환과 분할에는 정규표현을 사용하는 것이 가능하다.  
StringBuilder는 +로 문자열을 연결하는 것과 같다.   
+=를 사용해 반복해서 문자열을 연결하는 경우, StringBuilder를 사용한다.  
Stringbuilder는 초기용량을 지정해서 작성하는 것이 낫다.  

## `정규표현`
정규표현(Regular Expression)은, 문자열 안에 포함되어 있는 특정 패턴을 문자열로 표현하는 방법이다. 

|정규표현 패턴        | 의미                                  |
|------------------|-------------------------------------|
|.                 | 임의의 1문자                           |
|^a                | 선두 문자가 a                          |
|a$                | 마지막 문자가 a                         |
|a?                | 1개 이하의 a                           |
|a+                | 1개 이상의 a                           |
|a*                | 0개 이상의 a                           |
|a?? a*? a+?       | ?를 붙이면 부분 일치가 된다                |
|[abc] [a-z]       | abc 중 어떤 것  a부터 z 중 어떤 것        |
|[^abc]            | abc 어떤 것도 아니다                    |
|\d \s \w          | 숫자  공백문자(공백, 탭)  단어구성문자       |
|\D \S \W          | 위의 내용을 부정                        |
|x{n} x{n,} x{n,m} | n개의 X  n개 이상의 X  n개부터 m개까지의 X |
|(X)               | 정규표현을 하나로 묶음                    |
|X\|Y              | X 혹은 Y                             |


## `포함과 불포함`
* 정규표현 reg를 포함하는 문자열 : ^(?=.*reg).*$ 
* 정규표현 reg를 포함하지 않는 문자열 : ^(?!.*reg).*$
* 복수 지정이 가능 (포함) : ^(?=.*reg1)(?=.*reg2).*$
* 복수 지정이 가능 (불포함) :^(?!.*reg3)(?!.reg4).*$
* 포함, 불포함은 섞어서 사용 가능 : ^(?=reg1)(?!.*reg3).*$
* .*은 필요에 따라서 변경한다 : ^(?=.reg).{1,6}$  
* ^(?=.*reg)\d+$


## `정규표현을 사용하는 메소드`
* String 클래스의 split 메소드 : 분할 위치를 결졍하는 문자열을 지정한다. 
* String 클래스의 replaceAll 메소드 : 치환할 문자열을 지정한다.
* String 클래스의 matches 메소드 : 정규표현에 매치하는 문자열인지 조사한다.
* String 클래스의 useDelimiter 메소드 : 분할 기준이 되는 문자를 변경한다.  