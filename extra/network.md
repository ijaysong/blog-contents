# 네트워크

Udemy의 The Complete Networking Fundamentals Course를 듣고

## 기본 네트워킹 용어
### 네트워크란?
컴퓨터 네트워크란 공통적인 통신 기술을 사용하는 컴퓨팅 장치인 노드들 사이에서 자원을 공유하는 디지털 통신 네트워크이다.
노드 간 데이터 전송은 트위스트 페어 또는 광섬유 케이블과 같은 물리적 케이블 매체로 구성된 데이터 링크 또는 Wi-Fi, 마이크로파 전송 혹은 자유 공간 광학 통신과 같은 무선 방법을 통해 지원된다.

### 네트워크 기본 유형
1. 이더넷 케이블로 연결
이더넷 케이블은 근거리 통신망을 구축하기 위해 사용되는 케이블이다.
가장 흔하게는 랜선이라고도 하고, UTP 혹은 Unshield Twisted Pair Cable이라고도 한다.
RJ45 커넥터가 달린 이더넷 케이블로 서로 연결한 것이 가장 일반적인 형태의 컴퓨터 네트워크이다.

이더넷 케이블을 꽂았을 때 바로 연결되는 장치가 랜 카드이다.
랜 카드(네트워크 인터페이스 카드)는 컴퓨터를 네트워크에 연결하여 통신하기 위해 사용하는 하드웨어 장치이다.
고유 식별자로 MAC 주소를 사용하여 네트워크 매개체로 물리적인 접근을 사용하게 한다.
사용자들이 케이블을 연결하거나 무선으로 연결하여 네트워크에 접속할 수 있다.
랜카드는 10base5 -> 10base2 -> RJ45 커넥터를 지원하다가 현재는 USB만 지원하는 경우가 많다. (랜카드 자체 크기도 작아짐)

2. Wi-Fi
무선 인터넷 네트워크를 통해 디지털 장치를 연결하여 자원을 공유할 수 있다.
블루투스는 오늘날 가장 일반적으로 사용되는 네트워크 접속 방법 중 하나이다.
근거리 무선 연결에 사용되는 독점 네트워킹 표준이며, 주변 장치를 기본 장치에 연결하는데 자주 사용된다.

ex) 아이폰 AirDrop
에어드랍은 블루투스를 사용하여 근처에 있는 다른 에어드랍 지원 장치를 찾고,
연결이 이루어지면 장치간 Wi-Fi Direct라고 하는 Wi-Fi 링크를 둘 사이에 생성하여 파일을 전송한다.

### 네트워크 장치
거리가 멀면 멀수록 네트워크 신호가 약해진다.
이러한 신호의 강도 및 세기를 증폭시키기 위해 다음과 같은 장치들이 만들어졌다.

1. 리피터
`중계기`라고도 한다.
더 먼 거리에 도달할 수 있도록 입력 신호를 증폭시키는 장치이다.
전송되는 프레임(데이터)을 해석하려고 시도하지 않으므로 해당 기기는 `OSI 모델의 첫번째 계층인 물리 계층`에서 동작한다.

2. 허브
허브는 이더넷 네트워크에서 여러 대의 컴퓨터 네트워크 장비를 연결하는 장치이다.
한 대의 허브를 중심으로 여러대의 컴퓨터와 네트워크 장비가 마치 별 모양으로 서로 연결되며, 같은 허브에 연결된 장비는 모두 상호 간에 통신할 수 있다.

연결된 네트워크에서는 한 컴퓨터에서 주고받은 프레임이 같은 허브에 연결된 다른 모든 컴퓨터에 전달된다.
따라서 연결된 컴퓨터의 개수가 많아질수록 네트워크에서 충돌이 많아지고 속도가 느려진다.
이를 해결하기 위해 등장한 것이 스위치이다.

본질적으로 허브는 여러개의 포트를 가진 리피터라고 할 수 있다.
한 포트를 통해 들어온 프레임은 증폭되어 다른 포트들에 전달된다.
전송되는 프레임을 이해하지 않고 단순히 증폭시키기만 하므로 해당 기기는 `OSI 모델의 첫번째 계층인 물리 계층`에서 동작한다.

허브와 컴퓨터 장비 사이의 연결에는 보통 UTP 케이블과 RJ45 커넥터가 사용된다.

3. 스위치
간단히 스위치라고 부르며, 브리징 허브(bridging hub), MAC 브리지(MAC Bridge), 스위칭 허브 (Switching hub), 포트 스위칭 허브(Port switching hub)라고도 한다.

본질적으로 허브와 비슷하다.
소규모 통신을 위한 허브보다 훨씬 향상된 네트워크 속도를 제공한다.
이는 허브처럼 모든 컴퓨터에 프레임을 제공하는 것이 아니라, 필요로 하는 컴퓨터에만 전송하기 때문이다.
따라서 허브처럼 병목 현상이 쉽게 생기지 않는다.

전이중 통신방식(쌍방향 통신방식)을 지원하기 때문에 송신과 수신이 동시에 일어나는 경우 훨씬 향상된 속도를 제공한다.
스위치는 이 기능을 수행하기 위해서 각 컴퓨터의 고유한 MAC 주소를 기억하고 있어야 하고, 이 주소를 통해 프레임이 어디로 전송되어야 하는지 판단한다.
MAC address table을 확인하여 프레임을 올바른 목적지로 전달하므로 해당 기기는 `OSI 모델의 두번째 계층인 데이터 링크 계층`에서 동작한다.

4. 라우터
공유기라고도 한다.
IP 주소를 기반으로 한 둘 이상의 네트워크 간에 데이터 패킷을 전송하는 네트워크 장치이다.
패킷의 위치를 추출하여, 최적의 경로를 찾아 최단 시간에 전달해준다.
간단히 말해 서로 다른 네트워크 간 중계 역할을 해준다.

5. 방화벽
들어오고 나가는 네트워크 트래픽을 모니터링 하고 제어하는 네트워크 보안 시스템이다.
신뢰할 수 없는 외부 네트워크로부터의 해로운 트래픽이 들어오지 못하게 막는 역할을 한다.
서로 다른 네트워크를 지나는 데이터를 허용하거나 거부하거나, 검열, 수정하는 하드웨어나 소프트웨어 장치이다.

6. IDS (Instrusion Detection System)
침입 탐지 시스템이다.
시스템에 대한 원치 않는 조작을 탐지해준다.
침입 탐지 시스템은 전통적인 방화벽이 탐지할 수 없는 모든 종류의 악의적인 네트워크 트래픽 및 컴퓨터 사용을 탐지하기 위해 필요하다.
다음 활동에 대해 탐지하고 시스템 운영자에게 경고 동작을 취한다.

- 취약한 서비스에 대한 네트워크 공격
- 데이터 처리 공격
- 권한 확대 및 침입자 로그인
- 침입자에 의한 주요 파일 접근
- 악성 소프트웨어 (컴퓨터 바이러스 , 트로이 목마, 웜)

7. IPS (Intrusion Prevetion System)
침입 차단 시스템 혹은 침입 방지 시스템이다.
외부 네트워크로부터 내부 네트워크로 침입하는 네트워크 패킷을 찾아 제어하는 기능을 가진 소프트웨어 혹은 하드웨어이다.
일반적으로 내부 네트워크로 들어오는 모든 패킷이 지나가는 경로에 설치되며,
호스트의 IP주소, TCP/UDP의 포트번호, 사용자 인증에 기반을 두고 외부 침입을 차단하는 역할을 한다.
허용되지 않은 사용자나 서비스에 대해 사용을 거부하여 내부 자원을 보호한다.

=> 이렇게 이해하면 쉽다.
=> IDS는 집 지키는 작은 개, IPS는 집 지키는 큰 개
=> 집 지키는 개는 침입자에 대해 냄새를 맡고 짖음으로서 주인에게 침입자의 존재를 경고한다.

## TCP/IP 모델
OSI 계층은 현실에 맞지 않다는 의견이 많이 올라오고 있다.
OSI 계층은 TCP/IP 모델에 다음과 같이 매칭될 수 있다.

| 계층 | OSI | 계층 | TCP/IP |
|-----|-----|-----|--------|
| 7 | Application <td rowspan="3">5 ~ 7</td> | |
| 6 | Presentation | |
| 5 | Session | |
| 4 | Transport | 4 | Transport |
| 3 | Network | 3 | Network|
| 2 | Data Link | 2 | DataLink |
| 1 | Physical | 1 | Physical |

### TCP/IP 모델이란?
TCP/IP는 패킷 통신 방식의 인터넷 프로토콜인 IP(인터넷 프로토콜)와 TCP(전송 제어 프로토콜)로 이루어져 있다.
IP는 패킷 전달 여부를 보증하지 ㅇ낳고, 패킷을 보낸 순서와 받는 순서가 다를 수 있다.
TCP는 IP 위에서 동작하는 프로토콜로, 데이터의 전달을 보증하고 보낸 순서대로 받게 해준다.
HTTP, FTP, SMTP 등 TCP를 기반으로 한 수 많은 애플리케이션 프로토콜들이 IP 위에서 동작하기 때문에 묶어서 TCP/IP로 부르기도 한다.

### TCP/IP 모델의 계층
1. 계층 1 : 물리 계층 - Hub (Bits)
2. 계층 2 : 데이터 링크 계층 - Bridge / Switch (Frames)
3. 계층 3 : 네트워크 계층 - Router (Packets)
4. 계층 4 : 전송 계층 - TCP/UDP (Segments)
5. 계층 5 : 응용 계층 - HTTP, HTTPS, Telnet, FTP, TFTP (Applications)

## OSI 모델
### OSI 모델이란?
국제표준화기구(ISO)에서 개발한 모델로, 컴퓨터 네트워크 프로토콜 디자인과 통신 계층을 나누어 설명한 것이다.
일반적으로 OSI 7계층 이라고 한다.

이 모델은 프로토콜을 기능별로 나눈 것이다.
각 계층은 하위 계층의 기능만을 사용하고, 상위 계층에게 기능을 제공한다.

### OSI 모델의 7계층
1. 계층 1 : 물리 계층
네트워크의 기본 네트워크 하드웨어 전송 기술을 이룬다.
다양한 특징의 하드웨어 기술이 접목되어 있기에 OSI 아키텍처에서 가장 복잡한 계층으로 간주된다.

2. 계층 2 : 데이터 링크 계층
포인트 투 포인트(Point to Point) 간 신뢰성 있는 전송을 보장하기 위한 계층이다. ex) 이더넷
프레임에 물리적인 주소 부여 (MAC 주소)
에러 검출 / 재전송/ 흐름제어


3. 계층 3 : 네트워크 계층
여러 개의 노드를 거칠 때마다 경로를 찾아주는 역할을 하는 계층이다.
다양한 길이의 데이터를 네트워크들을 통해 전달하고, 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)를 제공하기 위한 기능적, 절차적 수단을 제공한다.
데이터를 연결하는 다른 네트워크를 통해 전달함으로서 인터넷이 가능하게 만드는 계층이다.
논리적인 주소 구조 부여 (IP)
경로 설정 (Route)

4. 계층 4 : 전송 계층
양 끝단(End to End)의 사용자들이 신뢰성 있는 데이터를 주고 받을 수 있도록 해주어, 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해준다.
패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷들을 다시 전송한다.
종단 간(End to End) 통신을 다루는 최하위 계층으로 종단간 신뢰성 있고 효율적인 데이터를 전송하며, 기능은 오류 검출 및 복구와 흐름제어, 중복 검사 등을 수행한다.
패킷 생성(Assembly / Sequencing / Deassembly / Error detection / Request repeat / Flow control)

5. 계층 5 : 세션 계층
양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공한다.
동시 송수신, 반이중 방식, 전이중 방식의 통신과 함께, 체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행한다.
이 계층은 TCP/IP 세션을 만들고 없애는 책임을 진다.
통신하는 사용자들을 동기화 하고 오류 복구 명령들을 일괄적으로 다룬다.
통신을 하기 위한 세션을 확립/ 유지 / 중단 (운영체제가 해줌)

6. 계층 6 : 표현 계층
코드 간 번역을 담당하여 사용자 시스템에서 데이터 형식 상 차이를 다루는 부담을 응용 계층으로부터 덜어준다.
예를 들면, EBCDIC로 인코딩된 문서 파일을 ASCII로 인코딩된 파일로 바꿔주는 것이 표현 계층의 몫이다.
사용자의 명령어를 완성 및 결과 표현
포장 / 압축 / 암호화

7. 계층 7 : 응용 계층
응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.
일반적인 응용서비스는 관련된 응용 프로세스들 사이의 전환을 제공한다.
응용 서비스의 예로 가장 터미널(텔넷) 등이 있다.
네트워크 소프트웨어 UI 부분
사용자의 입출력(I/O) 부분

### OSI 모델과 TCP/IP 모델
OSI 모델과 TCP/IP 모델은 관련 있으나 서로 완전히 매칭되는 것은 아니다.

| 계층 | OSI | 계층 | TCP/IP |
|-----|-----|-----|--------|
| 7 | Application <td rowspan="3">5 ~ 7</td> | |
| 6 | Presentation | |
| 5 | Session | |
| 4 | Transport | 4 | Transport |
| 3 | Network | 3 | Network|
| 2 | Data Link | 2 | DataLink |
| 1 | Physical | 1 | Physical |

### 포트 번호
네트워크 통신에서 포트 번호를 통해 어떤 포트 번호를 사용하는 http 서버로 데이터를 보낼지 결정한다.
포트 번호는 크게 세가지 범위로 나누어 지정한다.
- 시스템 포트 : 0 ~ 1023
ex)
- 21 : FTP 서버
- 53 : DNS 서버
- 69 : TFTP 서버
- 80 : Web 서버

- 유저 포트 : 1024 ~ 49151
- 다이나믹 / 프라이빗 포트 : 49152 ~ 65535

### 이메일 서버
Pop3는 오래된 프로토콜이다. 이메일 서버로부터 이메일을 검색하도록 허용한다.
SMTP는 이러한 다른 포트 번호를 사용하는 프로토콜을 통해 이메일을 전송한다.

## 이진수 (Binary)
컴퓨터와 네트워크 기기들은 이진수를 사용한다.
IP 주소와 같이 십진수로 구성된 것을 이진수로 바꾸어 이해한다.
모든 컴퓨터는 켜고 끄는 스위치 작동법을 사용해서 동작한다.
- off = 0
- on = 1

두자리 숫자를 이진수로 표현하면 4가지의 케이스로 나타낼 수 있다. ( 2x2 )
세자리 숫자를 이진수로 표현하면 8가지의 케이스로 나타낼 수 있다. ( 2x2x2 )
네자리 숫자를 이진수로 표현하면 16가지의 케이스로 나타낼 수 있다. ( 2x2x2x2 )
=> 2^자리수

ex)
IPv4는 총 8자리이다.
이진수로 256( 2^8 )개 표현될 수 있다.

### 이진수 변환
1. 이진수 -> 십진수
~~~
이진수 1111 1111를 10진수로 변환하면?
~~~

=> 255
(128 + 64 + 32 + 16 + 8 + 4 + 2 + 1)

| Base Exponent | 2^7 | 2^6 | 2^5 | 2^4 | 2^3 | 2^2 | 2^1 | 2^0 |
| Binary | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
| Decimal | 128 | 64 | 32 | 16 | 8 | 4 | 2| 1 |

2. 십진수 -> 이진수
~~~
십진수 192를 이진수로 변환하면?
~~~

=> 1100 0000

| Base Exponent | 2^7 | 2^6 | 2^5 | 2^4 | 2^3 | 2^2 | 2^1 | 2^0 |
| Binary | 1 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |
| Decimal | 128 | 64 | 32 | 16 | 8 | 4 | 2| 1 |

### IPv4, 서브넷 마스크, 라우터 주소 이진수로 변환
IPv4, 서브넷 마스크, 라우터 주소는 32bit를 가지는데 8비트(1byte)씩 끊어서 옥텟(octet) 이라고 한다.
IP는 총 4개의 옥텟으로 구성되어 있다.
ex) xxx.xxx.xxx.xxx

옥텟은 십진수 0 ~ 255 범위의 값을 가질 수 있다. (0000 0000 ~ 1111 1111)

ex) 10.129.16.123 (Decimal)
=> 00001010.10000001.00010000.01111011(Binary)

## 16진수 (Hexadecimal)
MAC 주소, IPv6는 16진법으로 적혀있다. ex) FE80::1, 2001::123/64

| 16 진법 | 10 진법 | 2 진법 |
|--------|--------|-------|
| 0 | 0 | 0000 |
| 1 | 1 | 0001 |
| 2 | 2 | 0010 |
| 3 | 3 | 0011 |
| 4 | 4 | 0100 |
| 5 | 5 | 0101 |
| 6 | 6 | 0110 |
| 7 | 7 | 0111 |
| 8 | 8 | 1000 |
| 9 | 9 | 1001 |
| A | 10 | 1010 |
| B | 11 | 1011 |
| C | 12 | 1100 |
| D | 13 | 1101 |
| E | 14 | 1110 |
| F | 15 | 1111 |

### 16 진수 변환
10진수 -> 2진수 -> 16진수로 변환하는 과정을 거친다.
2진수는 8bit로 이루어져 있는데, 4bit씩 나누어 16진수로 표현한다.

ex)
1000 -> 8
0000 -> 0

| 10진수 | 2진수 | 16진수 |
|-------|------|-------|
| 128 | 1000 0000 | 80 |
| 255 | 1111 1111 | FF |
| 224 | 1110 0000 | E0 |
| 240 | 1111 0000 | F0 |
| 255.255.255.255 | 1111 1111  1111 1111  1111 1111  1111 1111 | FF  FF  FF  FF |
| 10.1.1.1 | 0000 1010  0000 0001  0000 0001  0000 0001 | 0A  01  01  01 |
| 224.1.2.3 | 1110 0000  0000 0001  0000 0010  0000 0011 | E0  01  02  03 |
