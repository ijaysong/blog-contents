**1.토큰 기반 인증이란?**
- **토큰**을 이용해 사용자 인증작업을 처리하는 것
> - 유저가 회원 인증을 하게 될 때 **토큰**을 발급해줌으로서 유저가 자기 자신임을 인증 할 수 있게 한다.
> - 발급이 된 토큰은, 토큰의 유효기간 및 정보를 담고 있으며, 해싱 알고리즘을 통해 인증이 되어있어서 서버에서 검증을 통하여 처음 서버가 발급해주었던 정보가 변조되지 않았음을 보장 해 줄 수 있다.

-**stateless**하다.
-무상태라는 뜻이다. 서버 측에서 더 이상 유저의 인증정보를 기억하지 않고 토큰을 통해 이용자를 인증한다는 뜻이다.

> - 이 개념만으로 서버 기반 인증 방식의 많은 문제점이 해소 된다.

> > - 서버 메모리 과부하 해소
> > - 서버 확장 용이 (세션이 존재하지 않으니 유저들이 로그인 되어 있는지 신경쓰지 않으면서 scale out 가능)

---
**2.종류**
토큰 기반 방식에는 Claim(권한) 기반 토큰과 랜덤 값 기반 토큰이 있다.

||Claim 기반 토큰|랜덤 값 기반 토큰|
|----|-------------|------------------|
| 토큰값 | 공개되어도 되는 유저 정보(Claim)를 담은 토큰 ex) JWT | 랜덤한 스트링이 들어있는 토큰 ex) OAuth에 의해서 발급되는 Access token |
| 특징 | 토큰을 저장할 필요가 없다. | 토큰을 저장해야 한다. |
|  | 토큰 자체에 유저의 자원이 들어있다. | (서버) 토큰이 유효한 것인지 확인하기 위해서 저장해야 한다. |
|  | 암호화된 토큰 정보를 이용해 유효한지 아닌지 확인 할 수 있다. | (클라이언트) 토큰을 통해 유저를 식별하고자 한다면 서버에 별도로 API 호출을 보내어 유저 자원을 가져와야 한다. |

---

**3.구현방식**
토큰 기반 시스템의 구현 방식은 시스템마다 크고 작은 차이가 있겠지만, 대략적으로 다음과 같다.
(현재 spice도 이와 같은 구조로 이루어져 있다.)
![](jwt.png)

클라이언트 측에서 전달받은 토큰을 저장해두고, 서버에 요청 할때마다 해당 토큰을 HTTP 요청 헤더에 토큰 값을 포함시켜서 함께 서버에 전달한다.  

~~~ text
Authorization : Bearer <토큰>
~~~

---

**4.특징**
1.무상태(Stateless)이며 확장성(Scalability)
> - 서버는 클라이언트에 대한 정보를 저장할 필요가 없다. (토큰 해독이 되는지만 판단)
> - 그렇기에 서버를 확장하기에 매우 적합한 환경을 제공한다.  
>
> > - 만약에 세션을 서버측에서 저장하고 있고, 많은 트래픽을 감당하기 위해 여러 프로세스를 돌리거나 로드 밸런싱을 했다면, 세션의 정보가 분산된 프로세스간에 동기화가 되야하므로, 과정이 매우 복잡해진다.

2.보안성
> - 클라이언트가 서버에 요청을 보낼 때 더 이상 쿠키를 전달하지 않기 때문에 쿠키를 사용함으로써 발생하는 취약점이 사라진다. ex) XSS, CSRF

3.확장성(Extensibility)
> - 로그인 정보가 사용되는 분야가 확장된다.
> - 플랫폼간 권한을 공유할 수 있다. ex) OAuth 기능 : Facebook, LinkedIn, GitHub, Google 계정으로 로그인 할 수 있다.

4.여러 플랫폼 및 도메인 대응
> - 어떤 디바이스, 어떤 도메인에서도 토큰만 유효하다면 요청이 정상적으로 처리된다.
